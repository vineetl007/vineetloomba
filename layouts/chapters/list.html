{{ define "extra_head" }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Course",
  "name": {{ .Title | jsonify }},
  "description": {{ (or .Params.description "JEE Mathematics chapter by Vineet Loomba.") | jsonify }},
  "provider": {
    "@type": "Organization",
    "name": "Vineet Loomba",
    "sameAs": "https://vineetloomba.com/"
  },
  "offers": {
    "@type": "Offer",
    "category": "Free",
    "price": "0",
    "priceCurrency": "INR"
  },
  "hasCourseInstance": {
    "@type": "CourseInstance",
    "courseMode": "online",
    "courseWorkload": "PT2H",
    "location": {
      "@type": "VirtualLocation",
      "url": "{{ .Permalink }}"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  }
}
</script>
{{ end }}

{{ define "main" }}
<section class="max-w-7xl mx-auto px-8 py-8 text-white">

  <!-- Page Title -->
  <h1 class="text-3xl mb-6">{{ .Title }}</h1>

  <!-- Page Content (from _index.md) -->
  {{ if .Content }}
  <div class="prose prose-invert mb-10 max-w-full">
    {{ .Content }}
  </div>
  {{ end }}

  <!-- Subpages Tiles -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
   {{ range sort .Pages "Params.weight" }}
    <div class="bg-gray-800 rounded-lg shadow-md p-6 flex flex-col justify-between">
      <div>
        <h2 class="text-xl text-white mb-4">{{ .Title }}</h2>
      </div>
      <a href="{{ .RelPermalink }}"
        class="mt-auto inline-block bg-yellow-400 text-black font-concert py-2 px-4 rounded hover:bg-yellow-300">
        Start Learning
      </a>
    </div>
    {{ end }}
  </div>

{{/* Show buttons only for the chapters section */}}
{{ if and (eq .Kind "section") (hasPrefix .RelPermalink "/chapters/") }}

  {{ if eq .RelPermalink "/chapters/" }}
    <!-- On /chapters/ → Back to Home -->
    <div class="mt-10">
      <a href="/" class="inline-block bg-yellow-400 text-black font-concert py-2 px-4 rounded hover:bg-yellow-300">
        ← Back to Home
      </a>
    </div>
  {{ else }}
    <!-- On /chapters/<chapter>/ → Back to All Chapters -->
    <div class="mt-10">
      <a href="/chapters/" class="inline-block bg-yellow-400 text-black font-concert py-2 px-4 rounded hover:bg-yellow-300">
        ← Back to All Chapters
      </a>
    </div>
  {{ end }}

{{ end }}


  <!-- Blog Button -->
  <div class="mt-10">
  <a href="/blog/" class="inline-block bg-yellow-400 text-black font-concert py-2 px-4 rounded hover:bg-yellow-300">
    ← Visit JEE Strategy Blog
  </a>
</div>
 </section>
{{ end }}
