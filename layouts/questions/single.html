{{ define "main" }}
<section class="max-w-7xl mx-auto px-8 py-8 text-white">
  <!-- generate url dynamically -->
  {{ $questionURL := printf "/questions/jee-math/%s/%s/" .Params.chapter .Params.slug | relURL }}
<link rel="canonical" href="{{ $questionURL }}" />

  <!-- Question Title -->
  <h1 class="text-3xl mb-6">{{ .Title }}</h1>

  <!-- Difficulty & Tags -->
 {{ with .Params.tags }}
<div class="mb-6 flex flex-wrap gap-2">
  {{ range . }}
    <a href="/tags/{{ . | urlize }}/" 
       class="bg-yellow-400 text-black font-concert text-sm px-3 py-1 rounded-full hover:bg-yellow-300 transition"> 
      {{ . }}
    </a>
  {{ end }}
</div>
{{ end }}

  {{ with .Params.difficulty }}
<div class="mb-6 flex flex-wrap gap-2">
  <a href="/difficulty/{{ . | urlize }}/" 
     class="bg-blue-500 text-white font-concert text-sm px-3 py-1 rounded-full hover:bg-blue-400 transition">
    Difficulty: {{ . }}
  </a>
</div>
{{ end }}

  <!-- Question Type -->
{{ with .Params.question_type }}
<div class="mb-6 flex flex-wrap gap-2">
  <a href="/question-type/{{ . | urlize }}/" 
     class="bg-purple-500 text-white font-concert text-sm px-3 py-1 rounded-full hover:bg-purple-400 transition">
    Type: {{ . | title }}
  </a>
</div>
{{ end }}

  

  <!-- Question Content -->
  <div class="prose prose-invert mb-6 max-w-full">
    {{ .Content }}
  </div>

  <!-- JSON-LD Schema for Question & Video -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "url": "{{ $questionURL }}",
    "@type": "Question",
    "name": "{{ .Title }}",
    "text": "{{ with .Content | plainify }}{{ . | safeJS }}{{ end }}",
    "answerCount": 1,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "See solution above. Video solution available if embedded."
    },
    "author": {
      "@type": "Person",
      "name": "Vineet Loomba"
    },
    "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
    {{ if .Params.video }}
    "suggestedAnswer": {
      "@type": "VideoObject",
      "name": "Video Solution for {{ .Title }}",
      "description": "Video solution for {{ .Title }}",
      "thumbnailUrl": "https://img.youtube.com/vi/{{ .Params.video }}/hqdefault.jpg",
      "uploadDate": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
      "contentUrl": "https://www.youtube.com/watch?v={{ .Params.video }}",
      "embedUrl": "https://www.youtube.com/embed/{{ .Params.video }}",
      "publisher": {
        "@type": "Organization",
        "name": "Vineet Loomba",
        "url": "https://vineetloomba.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://vineetloomba.com/images/logo.png"
        }
      }
    }
    {{ end }}
  }
  </script>

</section>
{{ end }}
