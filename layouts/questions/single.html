{{ define "main" }}
<section class="max-w-7xl mx-auto px-8 py-8 text-white">

  <link rel="canonical" href="{{ .RelPermalink }}" />

  <!-- Question Title 
<h1 class="text-3xl mb-6">{{ .Params.question | markdownify }}</h1> -->

  <!-- Difficulty & Tags --
 {{ with .Params.tags }}
<div class="mb-6 flex flex-wrap gap-2">
  {{ range . }}
    <a href="/tags/{{ . | urlize }}/" 
       class="bg-yellow-400 text-black font-concert text-sm px-3 py-1 rounded-full hover:bg-yellow-300 transition"> 
      {{ . }}
    </a>
  {{ end }}
</div>
{{ end }}

  {{ with .Params.difficulty }}
<div class="mb-6 flex flex-wrap gap-2">
  <a href="/difficulty/{{ . | urlize }}/" 
     class="bg-blue-500 text-white font-concert text-sm px-3 py-1 rounded-full hover:bg-blue-400 transition">
    Difficulty: {{ . }}
  </a>
</div>
{{ end }}

  <!-- Question Type --
{{ with .Params.question_type }}
<div class="mb-6 flex flex-wrap gap-2">
  <a href="/question-type/{{ . | urlize }}/" 
     class="bg-purple-500 text-white font-concert text-sm px-3 py-1 rounded-full hover:bg-purple-400 transition">
    Type: {{ . | title }}
  </a>
</div>
{{ end }}
  <!-- New through Partials   Difficulty & Tags ---->
  
  {{ partial "question-meta.html" . }}


  <!-- Question Content -->

 <div class="prose prose-invert mb-6 max-w-full">
   {{ .Params.question | markdownify }}
 </div>

<!-- Options -->
{{ if .Params.options }}
<div class="mb-6">
  <ul class="list-decimal list-inside space-y-2">
    {{ range $i, $opt := .Params.options }}
      {{ $isCorrect := in $.Params.correctIndices $i }}
      <li class="p-3 rounded-lg
                 {{ if $isCorrect }}bg-green-100 font-semibold text-green-800{{ end }}">
        {{ $opt | markdownify }}
        {{ if $isCorrect }} <span class="ml-2 text-green-600">✔️</span>{{ end }}
      </li>
    {{ end }}
  </ul>
</div>
{{ end }}




 <!-- Numerical Answer -->
 {{ with .Params.numerical_answer }}
 <div class="mb-6 bg-gray-800 p-4 rounded-lg">
   <strong>Numerical Answer:</strong> {{ . }}
 </div>
 {{ end }}

 <!-- Solution --
 {{ with .Params.solution }}
 <div class="prose prose-invert mt-8">
   <h2 class="text-xl font-bold mb-3">Solution</h2>
   {{ . | markdownify }}
 </div>
 {{ end }}

 <!-- Video Solution --
 {{ with .Params.video }}
 <div class="mt-8 aspect-video">
  <iframe 
     src="https://www.youtube.com/embed/{{ . }}" 
     class="w-full h-full rounded-xl" 
     frameborder="0" 
     allowfullscreen>
   </iframe>
 </div>
 {{ end }}  -->

<!-- Solution -->
{{ with .Params.solution }}
<div class="prose prose-invert mt-8">
  <h2 class="text-xl font-bold mb-3">Solution</h2>
  {{ .Page.RenderString . }}
</div>
{{ end }}


  <!-- JSON-LD Schema for Question & Video -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "url": "{{ .Permalink }}",
    "@type": "Question",

    "name": "{{ .Params.question | plainify }}",
    "text": "{{ .Params.question | plainify }}",

    "answerCount": 1,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "{{ with .Params.solution | plainify }}{{ . | safeJS }}{{ end }}"
    },

    "author": {
      "@type": "Person",
      "name": "Vineet Loomba"
    },
    "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}"{{ if .Params.video }},{{ end }}
    {{ if .Params.video }}
    "suggestedAnswer": {
      "@type": "VideoObject",
      "name": "Video Solution for {{ .Params.question | plainify }}",
      "description": "Video solution for {{ .Params.question | plainify }}",
      "thumbnailUrl": "https://img.youtube.com/vi/{{ .Params.video }}/hqdefault.jpg",
      "uploadDate": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
      "contentUrl": "https://www.youtube.com/watch?v={{ .Params.video }}",
      "embedUrl": "https://www.youtube.com/embed/{{ .Params.video }}",
      "publisher": {
        "@type": "Organization",
        "name": "Vineet Loomba",
        "url": "https://vineetloomba.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://vineetloomba.com/images/logo.png"
        }
      }
    }
    {{ end }}
  }
  </script>


</section>
{{ end }}
